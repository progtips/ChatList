# Решение проблем с OpenRouter

## Частые ошибки и их решения

### 402 Payment Required (Требуется оплата)

**Причина:** Модель требует оплаты, на аккаунте OpenRouter недостаточно кредитов.

**Решение:**
1. Пополните баланс на https://openrouter.ai/
2. Или используйте бесплатные модели:
   - `mistralai/mistral-7b-instruct:free`
   - `meta-llama/llama-3.2-3b-instruct:free`

**Модели, которые обычно требуют оплаты:**
- `openai/gpt-4-turbo`
- `anthropic/claude-3.5-sonnet`
- `google/gemini-pro`

### 404 Not Found (Модель не найдена)

**Причина:** Неправильное имя модели или модель недоступна.

**Решение:**
1. Проверьте актуальное имя модели на https://openrouter.ai/models
2. Обновите имя модели через:
   - Меню "Модели" → "Управление моделями" → Выберите модель → "Редактировать"
   - Исправьте поле "API ID (model)"

**Примеры правильных имен:**
- `meta-llama/llama-2-70b-chat` (может быть устаревшим)
- `meta-llama/llama-3-70b-instruct` (более новая версия)

### 429 Too Many Requests (Превышен лимит)

**Причина:** Превышен лимит запросов (rate limiting).

**Решение:**
1. Подождите 1-2 минуты перед повторной попыткой
2. Уменьшите количество параллельных запросов
3. Проверьте лимиты на вашем аккаунте OpenRouter

### 400 Bad Request (Неверный запрос)

**Причина:** Неправильный формат запроса или неподдерживаемая модель.

**Решение:**
1. Проверьте правильность имени модели
2. Убедитесь, что модель поддерживает формат chat completions
3. Проверьте формат промта (не должен быть пустым)

**Примеры моделей, которые могут требовать особого формата:**
- Некоторые модели Google Gemini могут требовать другой формат запроса

## Рекомендации

### Для начала работы:
1. Используйте **Mistral 7B** - она работает бесплатно и стабильно
2. Добавьте модель через меню "Модели" → "Добавить модель"
3. Используйте имя: `mistralai/mistral-7b-instruct`

### Для продакшена:
1. Пополните баланс на OpenRouter
2. Используйте платные модели (GPT-4, Claude и др.)
3. Следите за балансом на https://openrouter.ai/

### Проверка моделей:
Всегда проверяйте актуальный список моделей на https://openrouter.ai/models перед добавлением.

## Обновление после исправлений

После обновления кода:
1. Перезапустите программу
2. Ошибки теперь будут показываться более понятно
3. В интерфейсе ошибки отображаются красным цветом с иконкой ❌

## Логи

Все ошибки логируются в файл `chatlist.log`. Проверьте его для детальной диагностики проблем.

