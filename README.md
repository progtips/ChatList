# ChatList

Программа для отправки одного промта в несколько нейросетей и сравнения их ответов. Позволяет сохранять ценные результаты в базу данных для дальнейшего анализа.

## Возможности

- ✅ Отправка одного промта в несколько моделей одновременно
- ✅ Поддержка различных API (OpenAI, OpenRouter, DeepSeek, Groq)
- ✅ Сохранение промтов и результатов в SQLite базу данных
- ✅ Управление моделями через удобный интерфейс
- ✅ Поиск и сортировка промтов и результатов
- ✅ Экспорт результатов в Markdown и JSON
- ✅ Логирование всех операций
- ✅ Асинхронная обработка запросов (не блокирует интерфейс)
- ✅ **AI-ассистент для улучшения промтов** - автоматическое улучшение и переформулировка промтов с помощью AI

## Требования

- Python 3.11+
- Windows / Linux / macOS

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта

2. Установите зависимости:
```powershell
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе `.env.example` и добавьте ваши API-ключи:
```
OPENROUTER_API_KEY=ваш_ключ_от_openrouter
OPENAI_API_KEY=ваш_ключ_от_openai
DEEPSEEK_API_KEY=ваш_ключ_от_deepseek
GROQ_API_KEY=ваш_ключ_от_groq
```

## Быстрый старт

### 1. Добавление моделей OpenRouter

Если вы используете OpenRouter, можно быстро добавить популярные модели:

```powershell
python add_openrouter_models.py
```

Это добавит в базу данных 5 популярных моделей:
- GPT-4 Turbo
- Claude 3.5 Sonnet
- Gemini Pro
- Llama 2 70B
- Mistral 7B

### 2. Запуск программы

```powershell
python main.py
```

### 3. Использование

1. **Введите промт** в текстовое поле или выберите из сохраненных

2. **(Опционально) Улучшите промт:**
   - Нажмите кнопку **"Улучшить промт"** или используйте контекстное меню (правый клик)
   - Выберите модель для улучшения
   - Настройте опции (генерация вариантов, адаптация под тип)
   - Выберите нужный вариант и нажмите "Использовать"

3. **Нажмите "Отправить"** - программа отправит запрос во все активные модели

4. **Выберите нужные результаты** чекбоксами

5. **Нажмите "Сохранить выбранные"** для сохранения в базу данных

## Управление данными

### Промты

- **Меню "Промты" → "Новый промт"** - создать новый промт с тегами
- **Меню "Промты" → "Управление промтами"** - просмотр, редактирование, удаление промтов
- Поиск и сортировка по дате, тексту или тегам

### Модели

- **Меню "Модели" → "Добавить модель"** - добавить новую модель
- **Меню "Модели" → "Управление моделями"** - просмотр, редактирование, удаление моделей
- Переключение активности моделей

### Результаты

- **Меню "Результаты" → "Просмотр результатов"** - просмотр всех сохраненных результатов
- Поиск по тексту промта, модели или ответу
- Сортировка по дате, модели или промту
- **Экспорт в Markdown** - для документирования
- **Экспорт в JSON** - для дальнейшей обработки

## Подключение моделей OpenRouter

OpenRouter предоставляет доступ к множеству моделей через единый API. Подробная инструкция в файле `OPENROUTER_GUIDE.md`.

**Пример добавления модели:**
- Название: GPT-4 Turbo (OpenRouter)
- API URL: `https://openrouter.ai/api/v1/chat/completions`
- API ID: `openai/gpt-4-turbo`
- Переменная окружения: `OPENROUTER_API_KEY`
- Тип модели: `openrouter`

Список доступных моделей: https://openrouter.ai/models

## Функция "AI-ассистент для улучшения промтов"

### Описание

Новая функция позволяет автоматически улучшать промты с помощью AI-моделей. Это помогает:
- Сделать промты более четкими и конкретными
- Получить альтернативные формулировки
- Адаптировать промты под разные типы задач (код, анализ, креатив)

### Использование

1. **Через кнопку:**
   - Введите или выберите промт
   - Нажмите кнопку "Улучшить промт"
   - Выберите модель для улучшения
   - Настройте опции (генерация вариантов, адаптация)
   - Нажмите "Улучшить"

2. **Через контекстное меню:**
   - Правый клик по полю ввода промта
   - Выберите "Улучшить промт"

### Возможности

- **Улучшение промта:** Получение более четкой и эффективной версии
- **Варианты переформулировки:** 2-3 альтернативных варианта
- **Адаптация под тип модели:** Специализация промта для кода, анализа или креатива
- **Асинхронная обработка:** Не блокирует интерфейс во время работы
- **Простое использование:** Один клик для подстановки улучшенного промта

### Рекомендации

- Используйте мощные модели (GPT-4, Claude 3.5 Sonnet) для лучших результатов
- Включайте генерацию вариантов для сравнения разных подходов
- Используйте адаптацию под тип модели для специализированных задач

## Структура проекта

```
ChatList/
├── main.py              # Главный модуль GUI
├── db.py                # Работа с базой данных
├── models.py            # Классы моделей нейросетей
├── network.py           # Отправка HTTP-запросов
├── config.py            # Конфигурация и переменные окружения
├── dialogs.py           # Диалоговые окна управления
├── test_db.py           # Тесты базы данных
├── test_models.py       # Тесты моделей
├── add_openrouter_models.py  # Скрипт добавления моделей OpenRouter
├── requirements.txt     # Зависимости проекта
├── .env.example         # Пример файла с переменными окружения
├── .gitignore           # Игнорируемые файлы
├── PROJECT.md           # Спецификация проекта
├── PLAN.md              # План реализации
├── DATABASE.md          # Схема базы данных
└── README.md            # Этот файл
```

## Тестирование

Запуск тестов базы данных:
```powershell
python test_db.py
```

Запуск тестов моделей:
```powershell
python test_models.py
```

## Создание исполняемого файла

Для создания исполняемого .exe файла:

1. Убедитесь, что установлены все зависимости:
```powershell
pip install -r requirements.txt
```

2. Запустите скрипт сборки:
```powershell
.\build.ps1
```

Или выполните команду вручную:
```powershell
pyinstaller --onefile --windowed --name "ChatList" main.py
```

Исполняемый файл будет создан в папке `dist\ChatList.exe`.

**Параметры PyInstaller:**
- `--onefile` - создает один исполняемый файл
- `--windowed` - скрывает консольное окно (для GUI приложений)
- `--name "ChatList"` - имя выходного файла

## Логирование

Программа создает файл `chatlist.log` с логами всех операций:
- Запросы к API
- Ошибки
- Операции с базой данных

## База данных

База данных SQLite (`chatlist.db`) создается автоматически при первом запуске.

**Таблицы:**
- `prompts` - сохраненные промты
- `models` - модели нейросетей
- `results` - сохраненные результаты
- `settings` - настройки программы

Подробная схема базы данных описана в `DATABASE.md`.

## Поддерживаемые типы моделей

- **openai** - OpenAI API (GPT-4, GPT-3.5 и др.)
- **openrouter** - OpenRouter API (доступ к множеству моделей)
- **deepseek** - DeepSeek API
- **groq** - Groq API

## Разработка

### Добавление нового типа модели

1. Создайте класс модели, наследующийся от `Model` в `models.py`
2. Реализуйте метод `send_request()`
3. Зарегистрируйте в `ModelFactory`:
```python
ModelFactory.register_model_type('new_type', NewModelClass)
```

## Лицензия

См. файл LICENSE

## Поддержка

При возникновении проблем:
1. Проверьте файл `chatlist.log` на наличие ошибок
2. Убедитесь, что API-ключи правильно указаны в `.env`
3. Проверьте, что модели активны в интерфейсе программы
